import{j as Y}from"./jsx-runtime.BCPyM5IQ.js";import{r as W}from"./index.OztxiM9T.js";import{S as k,P as q,W as V,b as H,c as N,d as O,A as Z,e as D,B as J,E as K,L as Q,a as U,p as _,q as j,r as $,s as ee,V as te}from"./three.module.19Lf9L0J.js";function ae(){const n=W.useRef(null);return W.useEffect(()=>{if(!n.current)return;const w=n.current.getBoundingClientRect(),g=w.width,x=w.height,d=new k,o=new q(75,g/x,.1,2e3),s=new V({alpha:!1,antialias:!0,powerPreference:"high-performance"});s.setClearColor(855309,1),s.setPixelRatio(Math.min(window.devicePixelRatio,1)),s.setSize(g,x),n.current.appendChild(s.domElement);const X=e=>{const t=document.createElement("canvas"),a=t.getContext("2d");if(!a)return null;t.width=256,t.height=64,a.font="bold 24px Poppins",a.fillStyle="#ffffff",a.textAlign="center",a.fillText(e,t.width/2,t.height/2);const l=new _(t);l.minFilter=j,l.magFilter=j;const c=new $({map:l,transparent:!0,opacity:.8});return new ee(c)},v=500,u=new H,y=new Float32Array(v*3);for(let e=0;e<v*3;e++)y[e]=(Math.random()-.5)*15;u.setAttribute("position",new N(y,3));const M=new O({size:.02,color:"#ffffff",transparent:!0,opacity:.6,blending:Z,sizeAttenuation:!0,depthWrite:!1}),P=new D(u,M);d.add(P);const z=new J(.5,.5,.5),E=new K(z),f=new Q({color:65535,transparent:!0,opacity:.9,depthWrite:!1}),r=new U(E,f);d.add(r);const i=X("");i&&(i.scale.set(1.2,.3,1),d.add(i)),o.position.z=8,o.position.x=2;let C=0,S=0,m=0,h=0;const b=e=>{const t=n.current?.getBoundingClientRect();t&&(C=(e.clientX-t.left)/t.width*2-1,S=-((e.clientY-t.top)/t.height)*2+1)};n.current.addEventListener("mousemove",b);let A=0;const R=1e3/60,B=e=>{requestAnimationFrame(B);const t=e-A;if(t<R)return;A=e-t%R,m+=(C-m)*.05,h+=(S-h)*.05;const a=1,l=2;o.position.x=l+m*a,o.position.y=h*a,o.lookAt(new te(2,0,0));const c=e*.001,F=c%20*(Math.PI*2)/20,I=5,p=3;r.position.set(I,Math.sin(F)*p,Math.cos(F)*p),r.rotation.x+=.02,r.rotation.y+=.02,f.opacity=.7+Math.sin(c*2)*.3;const T=(r.position.z+p)/(2*p);if(i){i.position.set(r.position.x,r.position.y+.5,r.position.z),i.lookAt(o.position),i.material.opacity=.8+Math.sin(c*2)*.2;const G=1.2*(.8+.4*T);i.scale.set(G,G*.25,1)}P.rotation.y=c*.02,s.render(d,o)};B(0);const L=()=>{if(!n.current)return;const e=n.current.getBoundingClientRect();o.aspect=e.width/e.height,o.updateProjectionMatrix(),s.setSize(e.width,e.height)};return window.addEventListener("resize",L),()=>{n.current?.removeEventListener("mousemove",b),window.removeEventListener("resize",L),n.current?.contains(s.domElement)&&n.current.removeChild(s.domElement),u.dispose(),M.dispose(),z.dispose(),E.dispose(),f.dispose(),i&&(i.material.map?.dispose(),i.material.dispose()),s.dispose()}},[]),Y.jsx("div",{ref:n,className:"absolute top-0 left-0 w-full h-full",style:{zIndex:0,pointerEvents:"none"}})}export{ae as default};
